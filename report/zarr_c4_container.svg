<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="426px" preserveAspectRatio="none" style="width:1507px;height:426px;" version="1.1" viewBox="0 0 1507 426" width="1507px" zoomAndPan="magnify"><defs/><g><!--MD5=[cbe9dd51b20122de1aac021e30b09a22]
cluster MET--><rect fill="#FFFFFF" height="367" style="stroke: #444444; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;" width="825" x="676" y="35.5659"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="1046.5" y="50.561">«boundary»</text><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="1034.5" y="68.7144">Met Norway</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1057.5" y="83.6265">[System]</text><!--MD5=[5be1d1ab5953586024febf7e1b12d246]
entity met_s3--><rect fill="#438DD5" height="134.0781" style="stroke: #3C7FC0; stroke-width: 1.5;" width="202" x="1291" y="260.5659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="1355" y="281.7046">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="1303.5" y="299.3862">MET Norway object</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="69" x="1357.5" y="318.0112">storage</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="125" x="1329.5" y="332.9233">[Swift S3 compliant]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="1394" y="348.7485"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="174" x="1305" y="365.0454">Externally available object</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="1363.5" y="381.3423">storage.</text><!--MD5=[e20c7447109d39a1ad45a88ec5f3ee86]
entity ecflow_job--><rect fill="#438DD5" height="115.4531" style="stroke: #3C7FC0; stroke-width: 1.5;" width="212" x="684" y="95.0659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="753" y="116.2046">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="748.5" y="133.8862">Batch job</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="121" x="729.5" y="148.7983">[Ecflow python job]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="792" y="164.6235"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="184" x="698" y="180.9204">Triggered on time or event</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="160" x="710" y="197.2173">and produce a dataset.</text><!--MD5=[bfc63d1b973df3b54defd7483ea381ac]
entity MMS--><rect fill="#438DD5" height="150.375" style="stroke: #3C7FC0; stroke-width: 1.5;" width="212" x="684" y="244.5659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="753" y="265.7046">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="729.5" y="283.3862">External MET</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="707.5" y="302.0112">messaging system</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="751.5" y="316.9233">[REST/NATS]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="792" y="332.7485"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="150" x="715" y="349.0454">External events about</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="188" x="694" y="365.3423">dataset production, from all</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="770.5" y="381.6392">hubs.</text><!--MD5=[5cc83da0d7b22721bace1da08cb1645b]
entity prodhub--><rect fill="#999999" height="52.5938" style="stroke: #8A8A8A; stroke-width: 1.5;" width="157" x="1313.5" y="143.0659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="115" x="1334.5" y="164.2046">«external_system»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137" x="1323.5" y="181.8862">Production Hub</text><!--MD5=[13667c3cc77eef8b4369a09bdfceffb1]
entity researcher--><rect fill="#08427B" height="52.5938" style="stroke: #073B6F; stroke-width: 1.5;" width="122" x="7" y="226.0659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="57" x="39.5" y="247.2046">«person»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="17" y="264.8862">Researcher</text><!--MD5=[d10672bb5e2bb769bc817e7102cbcce2]
entity jupyter--><rect fill="#999999" height="52.5938" style="stroke: #8A8A8A; stroke-width: 1.5;" width="135" x="325" y="226.0659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="115" x="335" y="247.2046">«external_system»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="344.5" y="264.8862">Jupyter lab</text><!--MD5=[11cb87260b5caddc0d8e4262c00388f3]
entity web_maps--><rect fill="#999999" height="71.2188" style="stroke: #8A8A8A; stroke-width: 1.5;" width="159" x="313" y="330.0659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="115" x="335" y="351.2046">«external_system»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="323" y="368.8862">Web page with</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="334.5" y="387.5112">climate maps</text><!--MD5=[24f2339fadeb0a65df5773fe31977aee]
link ecflow_job to met_s3--><path d="M873.0233,210.1025 C890.0349,220.2553 908.1957,229.9849 926,237.5659 C1043.1179,287.4347 1188.5844,309.8906 1285.5348,319.8584 " fill="none" id="ecflow_job-to-met_s3" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1290.6918,320.3815,1282.1415,315.4935,1285.7173,319.8768,1281.334,323.4526,1290.6918,320.3815" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="1106.5" y="269.6328">Push dataset</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="1127.5" y="283.8374">[Zarr/S3]</text><!--MD5=[f118da7c52b4e135b090e4f24289c936]
link ecflow_job to prodhub--><path d="M896.2942,192.7604 C985.4407,221.3478 1116.084,251.3024 1230,230.5659 C1264.8012,224.231 1301.8468,210.8262 1331.7162,198.1919 " fill="none" id="ecflow_job-to-prodhub" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1336.447,196.172,1326.5992,196.0274,1331.8486,198.1354,1329.7407,203.3848,1336.447,196.172" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="1082" y="196.6328">Access to schedule,</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="1104" y="211.7656">compute and</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1124.5" y="226.8984">storage.</text><!--MD5=[f118da7c52b4e135b090e4f24289c936]
link ecflow_job to prodhub--><path d="M896.2398,155.5661 C1013.697,158.883 1200.4946,164.158 1308.1243,167.1974 " fill="none" id="ecflow_job-to-prodhub-1" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1313.1891,167.3404,1304.3057,163.0877,1308.1911,167.1991,1304.0797,171.0845,1313.1891,167.3404" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="1091" y="128.6328">Register dataset</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1132.5" y="143.7656">event.</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="116" x="1097.5" y="157.9702">[CloudEvent/NATS]</text><!--MD5=[b6775ef5f70e1fc86c6d47639dde0543]
link web_maps to MMS--><path d="M472.0939,357.5635 C523.9373,352.2228 593.0241,344.8644 654,337.5659 C662.0293,336.6049 670.3211,335.5821 678.6645,334.5309 " fill="none" id="web_maps-to-MMS" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="683.8642,333.873,674.4332,331.0346,678.9038,334.5007,675.4376,338.9713,683.8642,333.873" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="509.5" y="318.6328">Listen for dataset</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="553.5" y="333.7656">events</text><!--MD5=[3bc03a2ea3744a11357bece7ef2c1035]
link web_maps to met_s3--><path d="M472.1224,382.0027 C528.7135,392.8204 606.6667,405.9776 676,411.5659 C773.4617,419.4215 798.566,419.7581 896,411.5659 C1031.6528,400.1604 1185.9915,371.5038 1285.9736,350.8313 " fill="none" id="web_maps-to-met_s3" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1290.9904,349.7913,1281.3658,347.7016,1286.0945,350.8063,1282.9898,355.535,1290.9904,349.7913" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="927" y="360.6328">Stream relevant</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="950" y="375.7656">fresh data</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="960.5" y="389.9702">[S3/Zarr]</text><!--MD5=[69acd9a52e3f9151abf8003619d4d6fb]
link researcher to jupyter--><path d="M129.036,252.5659 C183.1241,252.5659 262.198,252.5659 319.5955,252.5659 " fill="none" id="researcher-to-jupyter" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="324.7319,252.5659,315.7319,248.5659,319.7319,252.5659,315.7319,256.5659,324.7319,252.5659" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="160" y="219.6328">Interactive data</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="196" y="234.7656">mining</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="64" x="189" y="248.9702">[Web GUI]</text><!--MD5=[11950482ad3327c417a7691b4753ea99]
link jupyter to MMS--><path d="M460.381,264.0075 C520.2551,274.0995 608.6536,288.9994 678.8372,300.8291 " fill="none" id="jupyter-to-MMS" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="683.8583,301.6754,675.6484,296.235,678.9279,300.8443,674.3186,304.1237,683.8583,301.6754" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="503" y="253.6328">Get latest event for</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="540" y="268.7656">a dataset.</text><!--MD5=[a436f40e937cf3ed7e4e86a01e045afc]
link jupyter to met_s3--><path d="M422.4664,226.0558 C471.3999,184.7373 573.3378,106.7 676,77.5659 C770.0634,50.8721 798.3203,73.1879 896,77.5659 C1044.8926,84.2393 1104.4485,27.2518 1230,107.5659 C1275.7881,136.8562 1259.2589,169.4415 1291,213.5659 C1301.3738,227.987 1313.2589,242.6903 1325.1474,256.5345 " fill="none" id="jupyter-to-met_s3" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1328.4995,260.4156,1325.6438,250.9899,1325.2312,256.6316,1319.5894,256.2191,1328.4995,260.4156" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="927.5" y="19.6328">Stream variable</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="937.5" y="34.7656">from specific</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="960" y="49.8984">dataset</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="960.5" y="64.103">[S3/Zarr]</text><!--MD5=[ff8f74504d718b0b14a9543cc688c721]
@startuml Data access context diagram
!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/master/C4_Container.puml

LAYOUT_LEFT_RIGHT

System_Boundary(MET, "Met Norway"){
    Container(met_s3, "MET Norway object storage", "Swift S3 compliant", "Externally available object storage.")
    Container(ecflow_job, "Batch job", "Ecflow python job", "Triggered on time or event and produce a dataset.")
    Container(MMS, "External MET messaging system", "REST/NATS", "External events about dataset production, from all hubs.")
    System_Ext(prodhub, "Production Hub")
 
    Rel(ecflow_job, met_s3, "Push dataset", "Zarr/S3")
    Rel(ecflow_job, prodhub, "Access to schedule, compute and storage.")
    Rel(ecflow_job, prodhub, "Register dataset event.", "CloudEvent/NATS")
}

Person(researcher, "Researcher")
System_Ext(jupyter, "Jupyter lab")
System_Ext(web_maps, "Web page with climate maps")

Rel(web_maps, MMS, "Listen for dataset events")
Rel(web_maps, met_s3, "Stream relevant fresh data", "S3/Zarr")

Rel(researcher, jupyter, "Interactive data mining", "Web GUI")
Rel(jupyter, MMS, "Get latest event for a dataset.")
Rel(jupyter, met_s3, "Stream variable from specific dataset", "S3/Zarr")
@enduml

@startuml Data access context diagram





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}

skinparam rectangle<<boundary>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}






















skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}
















skinparam rectangle<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}








left to right direction

rectangle "==Met Norway\n<size:12>[System]</size>" <<boundary>> as MET{
    rectangle "==MET Norway object storage\n//<size:12>[Swift S3 compliant]</size>//\n\n Externally available object storage." <<container>> as met_s3
    rectangle "==Batch job\n//<size:12>[Ecflow python job]</size>//\n\n Triggered on time or event and produce a dataset." <<container>> as ecflow_job
    rectangle "==External MET messaging system\n//<size:12>[REST/NATS]</size>//\n\n External events about dataset production, from all hubs." <<container>> as MMS
    rectangle "==Production Hub" <<external_system>> as prodhub
 
    ecflow_job - -> met_s3 : "===Push dataset\n//<size:12>[Zarr/S3]</size>//"
    ecflow_job - -> prodhub : "===Access to schedule, compute and storage."
    ecflow_job - -> prodhub : "===Register dataset event.\n//<size:12>[CloudEvent/NATS]</size>//"
}

rectangle "==Researcher" <<person>> as researcher
rectangle "==Jupyter lab" <<external_system>> as jupyter
rectangle "==Web page with climate maps" <<external_system>> as web_maps

web_maps - -> MMS : "===Listen for dataset events"
web_maps - -> met_s3 : "===Stream relevant fresh data\n//<size:12>[S3/Zarr]</size>//"

researcher - -> jupyter : "===Interactive data mining\n//<size:12>[Web GUI]</size>//"
jupyter - -> MMS : "===Get latest event for a dataset."
jupyter - -> met_s3 : "===Stream variable from specific dataset\n//<size:12>[S3/Zarr]</size>//"
@enduml

PlantUML version 1.2020.18(Wed Sep 30 21:40:44 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>