<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="573px" preserveAspectRatio="none" style="width:985px;height:573px;" version="1.1" viewBox="0 0 985 573" width="985px" zoomAndPan="magnify"><defs/><g><!--MD5=[cbe9dd51b20122de1aac021e30b09a22]
cluster MET--><rect fill="#FFFFFF" height="366" style="stroke: #444444; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;" width="972" x="7" y="93.5659"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="451" y="108.561">«boundary»</text><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="439" y="126.7144">Met Norway</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="462" y="141.6265">[System]</text><!--MD5=[5be1d1ab5953586024febf7e1b12d246]
entity met_s3--><rect fill="#438DD5" height="134.0781" style="stroke: #3C7FC0; stroke-width: 1.5;" width="202" x="769" y="152.5659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="833" y="173.7046">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="781.5" y="191.3862">MET Norway object</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="69" x="835.5" y="210.0112">storage</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="125" x="807.5" y="224.9233">[Swift S3 compliant]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="872" y="240.7485"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="174" x="783" y="257.0454">Externally available object</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="841.5" y="273.3423">storage.</text><!--MD5=[e20c7447109d39a1ad45a88ec5f3ee86]
entity ecflow_job--><rect fill="#438DD5" height="115.4531" style="stroke: #3C7FC0; stroke-width: 1.5;" width="212" x="15" y="242.0659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="84" y="263.2046">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="79.5" y="280.8862">Batch job</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="121" x="60.5" y="295.7983">[Ecflow python job]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="123" y="311.6235"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="184" x="29" y="327.9204">Triggered on time or event</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="160" x="41" y="344.2173">and produce a dataset.</text><!--MD5=[5cc83da0d7b22721bace1da08cb1645b]
entity prodhub--><rect fill="#999999" height="52.5938" style="stroke: #8A8A8A; stroke-width: 1.5;" width="157" x="791.5" y="390.0659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="115" x="812.5" y="411.2046">«external_system»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137" x="801.5" y="428.8862">Production Hub</text><!--MD5=[13667c3cc77eef8b4369a09bdfceffb1]
entity researcher--><rect fill="#08427B" height="52.5938" style="stroke: #073B6F; stroke-width: 1.5;" width="122" x="60" y="24.0659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="57" x="92.5" y="45.2046">«person»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="70" y="62.8862">Researcher</text><!--MD5=[d10672bb5e2bb769bc817e7102cbcce2]
entity jupyter--><rect fill="#999999" height="52.5938" style="stroke: #8A8A8A; stroke-width: 1.5;" width="135" x="423" y="28.0659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="115" x="433" y="49.2046">«external_system»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="442.5" y="66.8862">Jupyter lab</text><!--MD5=[11cb87260b5caddc0d8e4262c00388f3]
entity web_maps--><rect fill="#999999" height="71.2188" style="stroke: #8A8A8A; stroke-width: 1.5;" width="159" x="411" y="496.0659"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="115" x="433" y="517.2046">«external_system»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="421" y="534.8862">Web page with</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="432.5" y="553.5112">climate maps</text><!--MD5=[24f2339fadeb0a65df5773fe31977aee]
link ecflow_job to met_s3--><path d="M227.2385,276.4222 C281.8925,265.3728 349.7351,252.9744 411,245.5659 C531.3456,231.013 670.4521,224.5765 763.6998,221.7481 " fill="none" id="ecflow_job-to-met_s3" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="768.9389,221.5916,759.8233,217.8626,763.9411,221.7412,760.0626,225.8591,768.9389,221.5916" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="441.5" y="213.6328">Push dataset</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="462.5" y="227.8374">[Zarr/S3]</text><!--MD5=[f118da7c52b4e135b090e4f24289c936]
link ecflow_job to prodhub--><path d="M227.2189,339.3149 C281.432,357.8534 348.8906,378.2743 411,389.5659 C540.4955,413.1085 693.589,417.5252 786.1642,417.6868 " fill="none" id="ecflow_job-to-prodhub" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="791.3492,417.6915,782.3529,413.6833,786.3492,417.6869,782.3455,421.6833,791.3492,417.6915" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="417" y="355.6328">Access to schedule,</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="439" y="370.7656">compute and</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="459.5" y="385.8984">storage.</text><!--MD5=[f118da7c52b4e135b090e4f24289c936]
link ecflow_job to prodhub--><path d="M227.3321,303.7728 C318.7195,308.5849 453.7563,318.5514 570,338.5659 C644.0237,351.3111 726.5083,373.345 786.2232,390.7502 " fill="none" id="ecflow_job-to-prodhub-1" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="791.2047,392.2068,783.689,385.8417,786.4057,390.8036,781.4438,393.5202,791.2047,392.2068" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="426" y="285.6328">Register dataset</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="467.5" y="300.7656">event.</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="116" x="432.5" y="314.9702">[CloudEvent/NATS]</text><!--MD5=[51fabd2798708d320eea78fca9f73a87]
link web_maps to prodhub--><path d="M570.0354,552.0534 C620.2754,561.0249 685.5577,565.2187 739,543.5659 C786.7644,524.2136 826.7279,478.1643 849.5141,447.1678 " fill="none" id="web_maps-to-prodhub" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="852.4785,443.0875,843.9523,448.0175,849.5396,447.1326,850.4245,452.7198,852.4785,443.0875" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="601" y="524.6328">Listen for dataset</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="645" y="539.7656">events</text><!--MD5=[3bc03a2ea3744a11357bece7ef2c1035]
link web_maps to met_s3--><path d="M535.1521,495.7874 C546.539,486.6174 558.7417,476.7503 570,467.5659 C643.0126,408.0028 725.4914,339.7494 785.463,289.9437 " fill="none" id="web_maps-to-met_s3" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="789.3803,286.69,779.9012,289.3635,785.534,289.8847,785.0128,295.5175,789.3803,286.69" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="608" y="300.6328">Stream relevant</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="631" y="315.7656">fresh data</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="641.5" y="329.9702">[S3/Zarr]</text><!--MD5=[69acd9a52e3f9151abf8003619d4d6fb]
link researcher to jupyter--><path d="M182.0154,51.2264 C246.6419,51.926 348.653,53.0303 417.4999,53.7756 " fill="none" id="researcher-to-jupyter" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="422.812,53.8331,413.856,49.7356,417.8123,53.7788,413.7691,57.7352,422.812,53.8331" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="258" y="19.6328">Interactive data</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="294" y="34.7656">mining</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="64" x="287" y="48.9702">[Web GUI]</text><!--MD5=[a436f40e937cf3ed7e4e86a01e045afc]
link jupyter to met_s3--><path d="M558.2478,80.7276 C562.232,82.3454 566.1729,83.9661 570,85.5659 C634.884,112.6884 706.85,144.7647 764.029,170.7333 " fill="none" id="jupyter-to-met_s3" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="768.8158,172.9087,762.2772,165.5435,764.2638,170.84,758.9673,172.8266,768.8158,172.9087" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="608.5" y="51.6328">Stream variable</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="618.5" y="66.7656">from specific</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="641" y="81.8984">dataset</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="641.5" y="96.103">[S3/Zarr]</text><!--MD5=[2253fc8b2534517f5b38eb16bb82807c]
@startuml Data access context diagram
!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/master/C4_Container.puml

LAYOUT_LEFT_RIGHT

System_Boundary(MET, "Met Norway"){
    Container(met_s3, "MET Norway object storage", "Swift S3 compliant", "Externally available object storage.")
    Container(ecflow_job, "Batch job", "Ecflow python job", "Triggered on time or event and produce a dataset.")
    System_Ext(prodhub, "Production Hub")
 
    Rel(ecflow_job, met_s3, "Push dataset", "Zarr/S3")
    Rel(ecflow_job, prodhub, "Access to schedule, compute and storage.")
    Rel(ecflow_job, prodhub, "Register dataset event.", "CloudEvent/NATS")
}

Person(researcher, "Researcher")
System_Ext(jupyter, "Jupyter lab")
System_Ext(web_maps, "Web page with climate maps")

Rel(web_maps, prodhub, "Listen for dataset events")
Rel(web_maps, met_s3, "Stream relevant fresh data", "S3/Zarr")

Rel(researcher, jupyter, "Interactive data mining", "Web GUI")
Rel(jupyter, met_s3, "Stream variable from specific dataset", "S3/Zarr")
@enduml

@startuml Data access context diagram





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}

skinparam rectangle<<boundary>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}






















skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}
















skinparam rectangle<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}








left to right direction

rectangle "==Met Norway\n<size:12>[System]</size>" <<boundary>> as MET{
    rectangle "==MET Norway object storage\n//<size:12>[Swift S3 compliant]</size>//\n\n Externally available object storage." <<container>> as met_s3
    rectangle "==Batch job\n//<size:12>[Ecflow python job]</size>//\n\n Triggered on time or event and produce a dataset." <<container>> as ecflow_job
    rectangle "==Production Hub" <<external_system>> as prodhub
 
    ecflow_job - -> met_s3 : "===Push dataset\n//<size:12>[Zarr/S3]</size>//"
    ecflow_job - -> prodhub : "===Access to schedule, compute and storage."
    ecflow_job - -> prodhub : "===Register dataset event.\n//<size:12>[CloudEvent/NATS]</size>//"
}

rectangle "==Researcher" <<person>> as researcher
rectangle "==Jupyter lab" <<external_system>> as jupyter
rectangle "==Web page with climate maps" <<external_system>> as web_maps

web_maps - -> prodhub : "===Listen for dataset events"
web_maps - -> met_s3 : "===Stream relevant fresh data\n//<size:12>[S3/Zarr]</size>//"

researcher - -> jupyter : "===Interactive data mining\n//<size:12>[Web GUI]</size>//"
jupyter - -> met_s3 : "===Stream variable from specific dataset\n//<size:12>[S3/Zarr]</size>//"
@enduml

PlantUML version 1.2020.18(Wed Sep 30 21:40:44 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>